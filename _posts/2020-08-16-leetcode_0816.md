---
title: "[LeetCode] Best Time to Buy and Sell Stock III"
date: 2020-08-16
categories: leetcode
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"
tags : week-3-august-15th-august-21st LeetCode algorithm python


---

<p>
  <img src="https://visitor-badge.laobi.icu/badge?page_id=jihyun22.github.io/leetcode/leetcode_0816/" alt="visitor"/>
</p>



**Best Time to Buy and Sell Stock III**
*week-3-august-15th-august-21st*

---

<img src= "https://github.com/Jihyun22/Jihyun22.github.io/blob/master/_posts/images/Leetcode.png?raw=true" align="center">

LeetCoding Challengeì˜ 8ì›” 16ì¼ **'Best Time to Buy and Sell Stock III'** ë¬¸ì œ í•´ì„¤ì…ë‹ˆë‹¤. 

- August LeetCoding Challenge [ë°”ë¡œê°€ê¸°](https://leetcode.com/explore/challenge/card/august-leetcoding-challenge/551/week-3-august-15th-august-21st/)



## ğŸ¯ ë¬¸ì œ

> Say you have an array for which the *i*th element is the price of a given stock on day *i*.
>
> Design an algorithm to find the maximum profit. You may complete at most *two* transactions.
>
> **Note:** You may not engage in multiple transactions at the same time (i.e., you must sell the stock before you buy again).

ì£¼ì‹ì˜ ê°€ê²©ì´ ë‚ ì§œë³„ë¡œ ì£¼ì–´ì§€ë©´ ì£¼ì‹ì„ ì‚¬ê³  íŒ”ì•„ì„œ(transaction) ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ ì´ìµì„ ì°¾ì•„ë‚´ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. transactionì€ ì¤‘ë³µìœ¼ë¡œ ì´ë£¨ì–´ì§ˆ ìˆ˜ ì—†ìœ¼ë©°, ìµœëŒ€ 2ë²ˆì…ë‹ˆë‹¤.



### Test Case1

```python
Input: [3,3,5,0,0,3,1,4]
Output: 6
Explanation: 4ì¼ë‚  ì£¼ì‹ì„ êµ¬ì…í•˜ì—¬ 6ì¼ë‚  íŒ”ê³ (ì´ìµ(3-0) = 3), 7ì¼ë‚  êµ¬ì…í•˜ì—¬ 8ì¼ë‚  íŒ”ì•„ì„œ(ì´ìµ(4-1)=3) ìµœëŒ€ ì´ìµì€ 6 ì…ë‹ˆë‹¤. 
Note : transactionì€ ìµœëŒ€ 2ë²ˆ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ì ì— ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
```

### Test Case2

```python
Input: [1,2,3,4,5]
Output: 4
Explanation: 1ì¼ë‚  ì£¼ì‹ì„ êµ¬ì…í•˜ì—¬ 5ì¼ë‚  íŒ”ì•„ì„œ(ì´ìµ(5-1)=4) ìµœëŒ€ ì´ìµì€ 4ì…ë‹ˆë‹¤.
Note : transactionì€ ì¤‘ë³µí•´ì„œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì— ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤(ë³‘í–‰ ë¶ˆê°€).
```

### Test Case3

```
Input: [7,6,4,3,1]
Output: 0
```



## ğŸ” í’€ì´

### í•´ì„¤

ì²«ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì˜ˆì‹œë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

#### ì²«ë²ˆì§¸ transaction

ì²«ë²ˆì§¸ transactionì€ ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ìµì„ ê³„ì‚°í•©ë‹ˆë‹¤. S_minì€ stock[:i] ì˜ ìµœì†Œê°’ì´ê³ , ìµœëŒ€ ì´ìµì€ stock[i] - S_min ì˜ ìµœëŒ€ê°’ì´ ì €ì¥ë©ë‹ˆë‹¤.

|        stock        |  3   |  3   |  5   |  0   |  0   |  3   |  1   |  4   |
| :-----------------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| **ìµœëŒ€ ì´ìµ**(tmp1) |  0   |  0   |  2   |  2   |  2   |  3   |  3   |  4   |
|      **S_min**      |  3   |  3   |  3   |  0   |  0   |  0   |  0   |  0   |

#### ë‘ë²ˆì§¸ transaction

ë‘ë²ˆì§¸ transactionì€ ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ì´ìµì„ ê³„ì‚°í•©ë‹ˆë‹¤. S_maxì€ stock[n-i:n] ì˜ ìµœëŒ€ê°’ì´ê³ , ìµœëŒ€ ì´ìµì€ S_max - stock[i]ì˜ ìµœëŒ€ê°’ì´ ì €ì¥ë©ë‹ˆë‹¤. 

|        stock        |  3   |  3   |  5   |  0   |  0   |  3   |  1   |  4   |
| :-----------------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| **ìµœëŒ€ ì´ìµ**(tmp2) |  4   |  4   |  4   |  4   |  4   |  3   |  3   |  0   |
|      **S_max**      |  5   |  5   |  5   |  4   |  4   |  4   |  4   |  4   |

#### ìµœëŒ€ ì´ìµ ê³„ì‚°

ì´ë•Œ tmp1[i] + tmp2[i]ì€ ê°€ëŠ¥í•œ ì´ìµì˜ ê²½ìš°ì˜ ìˆ˜ì…ë‹ˆë‹¤.

| ì´ìµ(tmp1[i]+tmp2[i]) |  4   |  4   |  6   |  6   |  6   |  6   |  6   |  4   |
| :-------------------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|  **ìµœëŒ€ ì´ìµ**(tmp1)  |  0   |  0   |  2   |  2   |  2   |  3   |  3   |  4   |
|  **ìµœëŒ€ ì´ìµ**(tmp2)  |  4   |  4   |  4   |  4   |  4   |  3   |  3   |  0   |

ë”°ë¼ì„œ ê²°ê³¼ê°’ì€ tmp1[i] + tmp2[i]ì˜ ìµœëŒ€ê°’ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.



### ì½”ë“œ 

ì‚¬ìš© ì–¸ì–´ëŠ” <code><img height="25" src="https://github.com/Jihyun22/Jihyun22.github.io/blob/master/assets/images/python.png?raw=true">python3</code>ì…ë‹ˆë‹¤.

```python
# python
# [LeetCode] week-3-august-16th
# @Jihyun22

# input -> ê´„í˜¸ ì œê±°, ','ê¸°ì¤€ìœ¼ë¡œ intê°’ ë¶„í• í•˜ì—¬ stockì´ë¦„ì˜ list ìƒì„±
stock = list(map(int, input().strip('[]').split(',')))

def maxProfit(stock):
    day = len(stock)
    # ì…ë ¥ê°’ì´ 2ê°œ ë¯¸ë§Œì´ë©´ 0 return
    if day < 2: return 0
    # ì–‘ ëê°’ì—ì„œ ì¤‘ì•™ìœ¼ë¡œ íƒìƒ‰
    left, right = stock[0], stock[day-1]
    # ìµœëŒ€ íŠ¸ë Œì ì…˜ì€ 2ë²ˆ ì¼ì–´ë‚˜ë¯€ë¡œ ê°ê° ì´ìµ ì €ì¥í•  ë°°ì—´ ì„ ì–¸
    tmp1, tmp2 = [0]*day, [0]*day
    
    for i in range(1, day):
        # ì™¼ìª½ -> ì˜¤ë¥¸ìª½ ìˆœìœ¼ë¡œ S_min ì—°ì‚°
        tmp1[i] = max(tmp1[i-1], stock[i]-left)
        left = min(left, stock[i])
        # ì˜¤ë¥¸ìª½ -> ì™¼ìª½ ìˆœìœ¼ë¡œ S_max ì—°ì‚°
        j = day-1-i
        tmp2[j] = max(tmp2[j+1], right-stock[j])
        right = max(right, stock[j])
        # ì´ìµì€ ìŒìˆ˜ê°€ ë  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì´ˆê¸°ê°’ì€ 0
        result = 0
        
    # ê°ê°ì˜ tmpì—ì„œ ië²ˆì§¸ ìˆ˜ì˜ í•©ì€ ì´ìµì˜ ê²½ìš°ì˜ ìˆ˜
    for i in range(day):
        # ì´ìµì˜ ìµœëŒ€ê°’ ì—°ì‚°
        result = max(result, tmp1[i]+tmp2[i])
    return result

print(maxProfit(stock))
```





## ğŸ“ Submit

LeetCode ì œì¶œ ì½”ë“œì…ë‹ˆë‹¤.

```python
class Solution:
    def maxProfit(self, stock: List[int]) -> int:
        day = len(stock)
        tmp1 = [0 for i in range(day)]
        tmp2 = [0 for i in range(day)]
        cache = [[0 for i in range(day)] for i in range(day)]

        for i in range(0, day):
            for j in range(i, day):
                cache[i][j] = stock[j]-stock[i]

        for i in range(day-1, -1, -1):
            tmp1[i] = max(cache[i][0:i+2])
            tmp2[i] = max(cache[0:i+2][i])

        tmp1.sort(reverse=True)
        return max(sum(tmp1[0:2]), max(tmp2))
```

*LeetCodeëŠ” ì‚¬ìš© ì–¸ì–´ ë³„ default í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í‰ê°€ê°€ ì§„í–‰ë©ë‹ˆë‹¤.* 
